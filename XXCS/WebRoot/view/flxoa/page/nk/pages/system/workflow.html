<!DOCTYPE html>
<html lang="en">

<head>
	<title>工作流管理</title>

	<!--[if lt IE 10]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="coder" />


	<link rel="icon" type="image/x-icon" href="/view/flxoa/page/nk/public/img/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/css/font.css" />
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/bower_components/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/themify-icons/themify-icons.css">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/icofont/css/icofont.css" />
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/css/jquery.mCustomScrollbar.css">
	<!-- <link rel="stylesheet" href="/view/flxoa/page/nk/files/assets/pages/chart/radial/css/radial.css" type="text/css" media="all"> -->

	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/oyxq/css/oy.css" />

	<!--<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/css/Gooflow/default.css"/> --> <!--影响划入图标时显示功能名称-->
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/css/Gooflow/GooFlow.min.css"/>
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/css/public.css" />
	<link rel="stylesheet" href="/view/flxoa/page/nk/files/assets/pages/chart/radial/css/radial.css" type="text/css" media="all">
	<link rel="stylesheet" type="text/css"
		  href="/view/flxoa/page/nk/files/bower_components/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/pages/data-table/css/buttons.dataTables.min.css">
	<link rel="stylesheet" href="/view/flxoa/page/nk/public/layer/theme/default/layer.css"/>
	<link rel="stylesheet" href="/view/flxoa/page/nk/xh/css/xh.css"/>
	<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/daterangepicker/daterangepicker.css"/>



    <link  href="/view/flxoa/page/nk/files/assets/pages/jquery.filer/css/themes/jquery.filer-dragdropbox-theme.css" type="text/css"
           rel="stylesheet"/>
    <link href="/view/flxoa/page/nk/files/assets/pages/jquery.filer/css/jquery.filer.css" type="text/css" rel="stylesheet"/>

    <link rel="stylesheet" href="/view/flxoa/page/nk/xh/css/xh.css"/>
    <link rel="stylesheet" href="/view/flxoa/page/nk/oyxq/css/oy.css"/>
	<script src="/view/flxoa/page/nk/public/js/tool.js"></script>

<link rel="icon" href="/view/flxoa/page/nk/public/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/view/flxoa/page/nk/public/css/font.css"/>
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/bower_components/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/themify-icons/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/icofont/css/icofont.css"/>
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/icon/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="/view/flxoa/page/nk/files/assets/pages/chart/radial/css/radial.css" type="text/css" media="all">
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/assets/pages/data-table/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="/view/flxoa/page/nk/public/layer/theme/default/layer.css"/>
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/css/public.css" />
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/public/daterangepicker/daterangepicker.css"/>
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/bower_components/Datedropper3-master/datedropper.min.css" />
    <link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/bower_components/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" type="text/css" href="/view/flxoa/page/nk/files/bower_components/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css">

</head>
<style>
	td.td-icon-warp>a{

		color: black;
	}
</style>

<body themebg-pattern="pattern1">
<div id="pcoded" class="pcoded" nav-type="st2" theme-layout="vertical" vertical-placement="left" vertical-layout="wide" pcoded-device-type="desktop" vertical-nav-type="expanded" vertical-effect="shrink" vnavigation-view="view1" fream-type="theme1" sidebar-img="true" sidebar-img-type="img1" layout-type="img">
	<div class="pcoded-overlay-box"></div>
	<div class="pcoded-container navbar-wrapper">
		<nav class="navbar header-navbar pcoded-header" header-theme="theme1" pcoded-header-position="fixed">
			<div class="navbar-wrapper">
				<div class="navbar-logo">
					<a class="mobile-menu" id="mobile-collapse" href="index.html#!">
						<i class="ti-menu"></i>
					</a>
					<div class="mobile-search">
						<div class="header-search">
							<div class="main-search morphsearch-search">
								<div class="input-group">
									<span class="input-group-addon search-close"><i class="ti-close"></i></span>
									<input type="text" class="form-control" placeholder="Enter Keyword">
									<span class="input-group-addon search-btn"><i class="ti-search"></i></span>
								</div>
							</div>
						</div>
					</div>
					<a href="index.html">
						<img class="img-fluid" src="/view/flxoa/page/nk/files/assets/images/logo.png" alt="Theme-Logo" style="height: 32px;" />
					</a>
					<a class="mobile-options">
						<i class="ti-more"></i>
					</a>
				</div>
				<div class="navbar-container container-fluid">
					<ul class="nav-left">
						<li>
							<div class="sidebar_toggle">
								<a href="javascript:void(0)"><i class="ti-menu"></i></a>
							</div>
						</li>
						<li class="header-search">
							<div class="main-search morphsearch-search">
								<div class="input-group">
									<span class="input-group-addon search-close"><i class="ti-close"></i></span>
									<input type="text" class="form-control">
									<span class="input-group-addon search-btn"><i class="ti-search"></i></span>
								</div>
							</div>
						</li>
						<li>
							<a href="index.html#!" onclick="javascript:toggleFullScreen()">
								<i class="ti-fullscreen"></i>
							</a>
						</li>
					</ul>
					<ul class="nav-right">
						<li class="header-notification">
							<a href="index.html#!">
								<i class="ti-bell"></i>
								<span class="badge bg-c-pink"></span>
							</a>
							<ul class="show-notification">
								<li>
									<h6>Notifications</h6>
									<label class="label label-danger">New</label>
								</li>
								<li>
									<div class="media">
										<img class="d-flex align-self-center img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
										<div class="media-body">
											<h5 class="notification-user">John Doe</h5>
											<p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
											<span class="notification-time">30 minutes ago</span>
										</div>
									</div>
								</li>
								<li>
									<div class="media">
										<img class="d-flex align-self-center img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-4.jpg" alt="Generic placeholder image">
										<div class="media-body">
											<h5 class="notification-user">Joseph William</h5>
											<p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
											<span class="notification-time">30 minutes ago</span>
										</div>
									</div>
								</li>
								<li>
									<div class="media">
										<img class="d-flex align-self-center img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-3.jpg" alt="Generic placeholder image">
										<div class="media-body">
											<h5 class="notification-user">Sara Soudein</h5>
											<p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
											<span class="notification-time">30 minutes ago</span>
										</div>
									</div>
								</li>
							</ul>
						</li>
						<li class="">
							<a href="index.html#!" class="displayChatbox">
								<i class="ti-comments"></i>
								<span class="badge bg-c-green"></span>
							</a>
						</li>
						<li class="user-profile header-notification">
							<a href="index.html#!">
								<img src="/view/flxoa/page/nk/files/assets/images/avatar-4.jpg" class="img-radius" alt="User-Profile-Image">
								<span>John Doe</span>
								<i class="ti-angle-down"></i>
							</a>
							<ul class="show-notification profile-notification">
								<li>
									<a href="index.html#!">
										<i class="ti-settings"></i> Settings
									</a>
								</li>
								<li>
									<a href="user-profile.html">
										<i class="ti-user"></i> Profile
									</a>
								</li>
								<li>
									<a href="email-inbox.html">
										<i class="ti-email"></i> My Messages
									</a>
								</li>
								<li>
									<a href="auth-lock-screen.html">
										<i class="ti-lock"></i> Lock Screen
									</a>
								</li>
								<li>
									<a href="auth-normal-sign-in.html">
										<i class="ti-layout-sidebar-left"></i> Logout
									</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div id="sidebar" class="users p-chat-user showChat">
			<div class="had-container">
				<div class="card card_main p-fixed users-main">
					<div class="user-box">
						<div class="chat-search-box">
							<a class="back_friendlist">
								<i class="fa fa-chevron-left"></i>
							</a>
							<div class="right-icon-control">
								<input type="text" class="form-control  search-text" placeholder="Search Friend" id="search-friends">
								<div class="form-icon">
									<i class="fa fa-search"></i>
								</div>
							</div>
						</div>
						<div class="main-friend-list">
							<div class="media userlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">
								<a class="media-left" href="index.html#!">
									<img class="media-object img-radius img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-3.jpg" alt="Generic placeholder image ">
									<div class="live-status bg-success"></div>
								</a>
								<div class="media-body">
									<div class="f-13 chat-header">Josephin Doe</div>
								</div>
							</div>
							<div class="media userlist-box" data-id="2" data-status="online" data-username="Lary Doe" data-toggle="tooltip" data-placement="left" title="Lary Doe">
								<a class="media-left" href="index.html#!">
									<img class="media-object img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
									<div class="live-status bg-success"></div>
								</a>
								<div class="media-body">
									<div class="f-13 chat-header">Lary Doe</div>
								</div>
							</div>
							<div class="media userlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
								<a class="media-left" href="index.html#!">
									<img class="media-object img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-4.jpg" alt="Generic placeholder image">
									<div class="live-status bg-success"></div>
								</a>
								<div class="media-body">
									<div class="f-13 chat-header">Alice</div>
								</div>
							</div>
							<div class="media userlist-box" data-id="4" data-status="online" data-username="Alia" data-toggle="tooltip" data-placement="left" title="Alia">
								<a class="media-left" href="index.html#!">
									<img class="media-object img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-3.jpg" alt="Generic placeholder image">
									<div class="live-status bg-success"></div>
								</a>
								<div class="media-body">
									<div class="f-13 chat-header">Alia</div>
								</div>
							</div>
							<div class="media userlist-box" data-id="5" data-status="online" data-username="Suzen" data-toggle="tooltip" data-placement="left" title="Suzen">
								<a class="media-left" href="index.html#!">
									<img class="media-object img-radius" src="/view/flxoa/page/nk/files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
									<div class="live-status bg-success"></div>
								</a>
								<div class="media-body">
									<div class="f-13 chat-header">Suzen</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="showChat_inner">
			<div class="media chat-inner-header">
				<a class="back_chatBox">
					<i class="fa fa-chevron-left"></i> Josephin Doe
				</a>
			</div>
			<div class="media chat-messages">
				<a class="media-left photo-table" href="index.html#!">
					<img class="media-object img-radius img-radius m-t-5" src="/view/flxoa/page/nk/files/assets/images/avatar-3.jpg" alt="Generic placeholder image">
				</a>
				<div class="media-body chat-menu-content">
					<div class="">
						<p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
						<p class="chat-time">8:20 a.m.</p>
					</div>
				</div>
			</div>
			<div class="media chat-messages">
				<div class="media-body chat-menu-reply">
					<div class="">
						<p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
						<p class="chat-time">8:20 a.m.</p>
					</div>
				</div>
				<div class="media-right photo-table">
					<a href="index.html#!">
						<img class="media-object img-radius img-radius m-t-5" src="/view/flxoa/page/nk/files/assets/images/avatar-4.jpg" alt="Generic placeholder image">
					</a>
				</div>
			</div>
			<div class="chat-reply-box p-b-20">
				<div class="right-icon-control">
					<input type="text" class="form-control search-text" placeholder="Share Your Thoughts">
					<div class="form-icon">
						<i class="fa fa-paper-plane"></i>
					</div>
				</div>
			</div>
		</div>

		<div class="pcoded-main-container" style="margin-top: 56px;">
			<div class="pcoded-wrapper">
				<nav class="pcoded-navbar" navbar-theme="theme1" active-item-theme="theme5" sub-item-theme="theme2" active-item-style="style0" pcoded-navbar-position="fixed">
					<div class="sidebar_toggle">
						<a href="index.html#"><i class="icon-close icons"></i></a>
					</div>
					<div class="pcoded-inner-navbar main-menu">
						<!--<div class="pcoded-navigation-label" menu-title-theme="theme6">Navigation</div>-->
						<ul class="pcoded-item pcoded-left-item" id="navi">

						</ul>
					</div>
				</nav>
				<div class="pcoded-content">
					<div class="pcoded-inner-content">
						<div class="main-body">
							<div class="page-wrapper">
							<div class="page-header card">
                                <div class="card-block">
                                    <ul class="breadcrumb-title">
                                        <li class="breadcrumb-item">
                                            <a href="index.html"> <i class="fa fa-home"></i> </a>
                                        </li>
                                        <li class="breadcrumb-item">
                                            <a href="avascript:void(0)">系统管理</a>
                                        </li>
                                        <li class="breadcrumb-item">
                                            <a href="javascript:void(0)">工作流管理</a>
                                        </li>
                                    </ul>
                                </div>
                                </div>
								<div class="row">
									<div class="col-sm-12">
										<div class="card">
											<div class="card-block ">
												<form>
													<div class="form-group">
														<div class="row">
															<div class="col-sm-3 col-md-3">
																<input id="selectWorkflowName" type="text" class="form-control" placeholder="按工作流名称查询"/>
															</div>
															<div class="col-sm-2 col-md-2">
																<input id="selectTemplateName" type="text" class="form-control" placeholder="按申请表名称查询"/>
															</div>
															<div class="col-sm-2 col-md-2">
																<input id="selectDeptName" type="text" class="form-control" placeholder="按工作流部门名称查询"/>
															</div>
															<div class="col-sm-2 col-md-2">
																<input id="selectCompanyName" type="text" class="form-control" placeholder="按工作流公司名称查询"/>
															</div>
															<div class="col-sm-3 col-md-3 t-alg-cent tex-cent">
																<button type="button" onclick="getList()" class="btn btn-primary">查询</button>
																<button type="reset" onclick="resetCondition()" class="btn but-success">重置</button>
															</div>
														</div>
													</div>
												</form>







												<div class="panl-btn-group">
													<button type="button" class="bg-c-lan col-w btu-add-workflow pull-right mrg-b10" >添加工作流</button>
												</div>

												<div class="dt-responsive table-responsive ">
													<table  id="workFlowTable" class="table footer-search table-striped table-bordered nowrap" > <!-- id="workFlowTable"    footer-search-->
														<thead class="bg-c-lan col-w ">
															<tr>
																<th width="5%">序号</th>
																<th width="15%">工作流名称</th>
																<th width="38%">申请表</th>
																<th width="15%">工作流部门</th>		
																<th width="15%">工作流公司</th>
																<th width="12%">操作</th>
															</tr>
														</thead>
														<tbody id="workFlowList">
														<!--<tr>
															<td>1</td>
															<td>System Architect</td>
															<td>Edinburgh</td>
															<td>61</td>
															<td>2011/04/25</td>
															<td class="td-icon-warp">
																<a href="javascript:void(0);" class="pad-r10 btn_workflow_check mrg-l-r5"><i class="fa fa-eye" data-toggle="tooltip" data-placement="top" title="" data-original-title="查看"></i></a>
																<a href="javascript:void(0);" class="btn_workflow_amend mrg-l-r5"><i class="fa fa-pencil" data-toggle="tooltip" data-placement="top" title="" data-original-title="修改"></i></a>
																<a href="javascript:void(0);" class="btn_workflow_delete mrg-l-r5"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" title="" data-original-title="删除"></i></a>
															</td>
														</tr>-->
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>







								<!--工作流详情弹出层-->
								<div class="workflow-check"  style="display: none">
									<div class="table-responsive">

									</div>

								</div>

								<!--添加工作流弹出层-->
								<div class="add-workflow"  style="display: none">
									<div class="form-group container" >
										<form class="form-inline">
											<div class="form-group mrg-tp20" id="work_flw_inp"  data-mod="work_flw_inp" style="display: none">
												<lable name="form-label">工作流名称：</lable>
												<input name="workflowName" id="workflowName" data-mod="workflowName" type="text" class="form-control"/>
											</div>

											<div class="form-group mrg-tp20" data-mod="work" >
												<!--<div id="demo" style="width:1118px;height:490px;"></div>-->
											</div>
											<div class="form-group mrg-tp20" data-mod="save" style="margin:20px auto 5px auto">
												<input id="btnSave" style="display: none;" type="button" value='保存' class="btn-xs btn-primary" onclick="gFlow.save()"/>
											</div>
										</form>
									</div>

								</div>

							</div>
							<div id="styleSelector"> </div>
							<input id="id" type="hidden">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style type="text/css">
.dataTables_paginate  .paginate_button  { cursor:pointer;
    position: relative;
    display: inline-block;
    padding: .5rem .75rem;
    margin-left: -1px;
    line-height: 1.25;
    color: #007bff;
    background-color: #fff;
    border: 1px solid #ddd;
}
.dataTables_paginate  .paginate_button.current  { background-color: #007bff; border:1px solid #007bff; color:#fff; } 
</style>


<script src="/view/flxoa/page/nk/files/bower_components/jquery/js/jquery.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/jquery-ui/js/jquery-ui.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/popper.js/js/popper.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/bootstrap/js/bootstrap.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/pages/widget/excanvas.js"></script>

<script src="/view/flxoa/page/nk/files/bower_components/jquery-slimscroll/js/jquery.slimscroll.js"></script>

<script src="/view/flxoa/page/nk/files/bower_components/modernizr/js/modernizr.js"></script>

<script src="/view/flxoa/page/nk/files/assets/js/SmoothScroll.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>

<!--<script src="/view/flxoa/page/nk/files/bower_components/chart.js/js/Chart.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/widget/amchart/pie.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/widget/amchart/amcharts.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/widget/amchart/pie.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/widget/amchart/serial.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/widget/amchart/light.js"></script>-->

<script src="/view/flxoa/page/nk/files/assets/js/pcoded.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/navbar-image/vertical-layout.min.js"></script>

<!--<script src="/view/flxoa/page/nk/files/assets/pages/dashboard/custom-dashboard.js"></script>-->
<script src="/view/flxoa/page/nk/files/assets/js/script.js"></script>
<!--<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/data-table-custom.js"></script>-->

<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/dataTables.buttons.min.js"></script>-->
<script src="/view/flxoa/page/nk/public/layer/layer.js"></script>

<!--<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/vfs_fonts.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/modernizr/js/css-scrollbars.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/jszip.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/pdfmake.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/buttons.print.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/buttons.html5.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-responsive/js/dataTables.responsive.min.js"></script>-->
<!--<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>-->
<!--<script type="text/javascript" src="/view/flxoa/page/nk/public/daterangepicker/moment.js"></script>-->
<!--<script type="text/javascript" src="/view/flxoa/page/nk/public/daterangepicker/daterangepicker.js"></script>-->







   <script src="/view/flxoa/page/nk/files/bower_components/jquery-ui/js/jquery-ui.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/popper.js/js/popper.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/bootstrap/js/bootstrap.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/jquery-slimscroll/js/jquery.slimscroll.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/modernizr/js/modernizr.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/modernizr/js/css-scrollbars.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/jszip.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/pdfmake.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/vfs_fonts.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/data-table-custom.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/pcoded.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/navbar-image/vertical-layout.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/view/flxoa/page/nk/files/assets/js/script.js"></script>
<script src="/view/flxoa/page/nk/public/layer/layer.js"></script>
<script src="/view/flxoa/page/nk/files/bower_components/Datedropper3-master/datedropper.min.js"></script>
<script src="/view/flxoa/page/nk/public/daterangepicker/moment.js"></script>
<script src="/view/flxoa/page/nk/public/daterangepicker/daterangepicker.js"></script>

<script src="/view/flxoa/page/nk/files/assets/pages/jquery.filer/js/jquery.filer.min.js"></script>
   <script src="/view/flxoa/page/nk/files/assets/pages/filer/custom-filer.js"></script>



<script src="/view/flxoa/page/nk/files/assets/pages/data-table/js/data-table-custom.js"></script>

<script src="/view/flxoa/page/nk/files/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>


<script type="text/javascript" src="/view/flxoa/page/nk/public/js/Gooflow/GooFlow.js"></script>
<script type="text/javascript" src="/view/flxoa/page/nk/public/js/Gooflow/GooFlow.print.min.js"></script>
<script type="text/javascript" src="/view/flxoa/page/nk/public/js/Gooflow/config.js"></script>
<script type="text/javascript" src="/view/flxoa/page/nk/public/js/Gooflow/data2.js"></script>

<script src="/view/flxoa/page/nk/xh/js/xh.js"></script>
<script src="/view/flxoa/page/nk/oyxq/js/oy.js"></script>

 

<script>
		 //当前页索引
        var nowPageIndex = 0;
    $('#workFlowTable').DataTable({
        "retrieve": true,
        "destroy" : true,
        "language": {
            "url": "/view/flxoa/page/nk/public/resource/zh_CN.json"
        },
        "aoColumnDefs": [ { "bSortable": false, "aTargets": [ 0 , 5 ] }],
	});

</script>
<script type="text/javascript">


	function Export(){
		document.getElementById("result").value=JSON.stringify(demo.exportData());
	}

	//返回工作流列表
	function getList()
	{
		var workflowName = $("#selectWorkflowName").val();
		var templageNames = $("#selectTemplateName").val();
		var departmentName =  $("#selectDeptName").val();
		var companyName =  $("#selectCompanyName").val();
		$.ajax({
			url:"/flxoa/workflow/getlist",
			type : "post",
			data : {
				"workflowName":workflowName,
				"templageNames":templageNames,
				"departmentName":departmentName,
				"companyName":companyName
			},
			success:function(data)
			{
				var json = eval('(' + data + ')');
				console.log(json);
				//document.getElementById("list").innerHTML = "";
				//
				//document.getElementById("workFlowList").innerHTML = "";
				//var str="";
				console.log(json);
				//var n = 0;
				var workFlowTable = $('#workFlowTable').DataTable();
					 workFlowTable.clear().draw();
				for(var i=0; i<json.length; i++)
				{
					n=i+1;					
					 workFlowTable.row.add([
					 	'<td>'+n+'</td>',
					 	/*'<td>'+json[i].workflowName+'</td>',*/
					 	 returnStrByLength(json[i].workflowName,16),
					 	/*'<td>'+json[i].departmentName+'</td>',*/
					 	/*'<td>'+json[i].templageNames+'</td>',*/
					 	returnStrByLength(json[i].templageNames,16),
					 	/*'<td>'+json[i].companyName+'</td>',*/
					 	returnStrByLength(json[i].companyName,16),
					 	returnStrByLength(json[i].departmentName,16),
					 	'<td>'+
					 	'<div style=" position: relative;">'+
					 		"<a href='javascript:void(0);' class='btn_workflow_check mrg-l-r5' title='"+json[i].id+"' onclick=gFlow.showLook("+json[i].id+",'"+json[i].workflowName+"')>"+
						"<input type='hidden' id='wk_"+json[i].id+"' value='"+json[i].workflowJson+"'>"+
					 		"<i class='fa fa-eye roweye' id='"+json[i].id+"' data-toggle='tooltip' data-placement='top' title='查看' data-original-title='查看'></i>"+
						"</a>"+
					 	"<a href='javascript:void(0);' class='btn_workflow_amend mrg-l-r5 pad-r10' onclick=gFlow.showUpdate("+json[i].id+",'"+json[i].workflowName+"')>"+
						    "<i class='fa fa-pencil rowamend' id='"+json[i].id+"' data-toggle='tooltip' data-placement='top' title='修改' data-original-title='修改'></i>"+
						"</a>"+
						"<a href='javascript:void(0);' class='btn_workflow_delete mrg-l-r5' onclick='gFlow.del("+json[i].id+")'>"+
					 	    "<i class='fa fa-trash rowdelt' id='"+json[i].id+"' data-toggle='tooltip' data-placement='top' title='删除' data-original-title='删除'></i>"+
					 	    "</a>"+
					 	 '</div>'+
					 	'</td>'
					 	]).draw();

					// str+= "<tr>";
					// str+= "<td>";
					// str+= json[i].id;
					// str+= "</td>";
					// str+= "<td>";
					// str+= 	json[i].workflowName;
					// str+= "</td>";
					// str+= "<td>";
					// str+= 	json[i].departmentName;
					// str+= "</td>";
					// str+= "<td>";
					// str+= 	json[i].templageNames;
					// str+= "</td>";
					// str+= "<td>";
					// str+= 	json[i].companyName;
					// str+= "</td>";
					// str+= "<td>";
					// str+= 	"</a>";
					// str+= 	"<a href='javascript:void(0);' class='btn_workflow_check mrg-l-r5' title='"+json[i].id+"' onclick=gFlow.showLook("+json[i].id+",'"+json[i].workflowName+"')>";
					// str+=	"<input type='hidden' id='wk_"+json[i].id+"' value='"+json[i].workflowJson+"'>";
					// str+= 		"<i class='fa fa-eye' data-toggle='tooltip' data-placement='top' title='查看' data-original-title='查看'></i>";
					// str+= 	"</a>";
					// str+= 	"<a href='javascript:void(0);' class='btn_workflow_amend mrg-l-r5 pad-r10' onclick=gFlow.showUpdate("+json[i].id+",'"+json[i].workflowName+"')>";
					// str+= 	    "<i class='fa fa-pencil' data-toggle='tooltip' data-placement='top' title='修改' data-original-title='修改'></i>";
					// str+= 	"</a>";
					// str+= 	"<a href='javascript:void(0);' class='btn_workflow_delete mrg-l-r5' onclick='gFlow.del("+json[i].id+")'>";
					// str+= 	    "<i class='fa fa-trash' data-toggle='tooltip' data-placement='top' title='删除' data-original-title='删除'></i>";
					// str+= "</td>";
					// str+= "</tr>";

				};
				 //跳转到上次点击的页索引
       			 workFlowTable.page(nowPageIndex).draw(false);
				
			}
		});
	};
	//保存翻页后的当前页索引
    $('#workFlowTable').on( 'page.dt', function () {
        var info = $('#workFlowTable').DataTable().page.info();
        nowPageIndex = info.page;
    }); 


	getList();


	//重置
	function resetCondition(){
		//初始化查询条件
		$('#selectWorkflowName').val("");
		$('#selectTemplateName').val("");
		$('#selectDeptName').val("");
		getList();
	}

</script>
<script>
	var demoObj;
	var demo;
	var gFlow ={
		init:function(domid,propert){

					//demo=$.createGooFlow(dmid,property);
					demo=GooFlow.init(domid,propert);
					//demo.setNodeRemarks(remark);
					//demo.loadData(jsondata);
					//demo.reinitSize(1000,520);
					demo.onItemRightClick=function(id, type){
						console.log("onItemRightClick: "+id+","+type);
						return true;//返回false可以阻止浏览器默认的右键菜单事件
					};
					demo.onItemDbClick=function(id, type){
						console.log("onItemDbClick: "+id+","+type);
						//return false;//返回false可以阻止原组件自带的双击直接编辑事件
					};
					demo.onPrintClick=function(){
						demo.print(1);
					};

		},


		//显示添加页面
		showAdd:function(){

			$("#btnSave").show();
			$("#id").val("");
			$("#workflowName").val("");
			demo.clearData();
		},

		//修改页面数据加载
		showUpdateData:function(id)
		{

			//demo.clearData();
			$("#id").val(id);
			$.ajax({
				url:"/flxoa/workflow/getbyid",
				type : "post",
				data : {
					"id":id
				},
				success:function(data)
				{
					$('#work_flw_inp').show();
					var json = eval('(' + data + ')');
					$("#workflowName").val(json.workflowName);
					var workflowJson = eval('(' + json.workflowJson + ')');
					console.info(workflowJson);
					demo.loadData(workflowJson);
				}
			});
		},
		//显示修改页面
		showUpdate:function(id,tname)
		{
			$("#btnSave").show();
			this.showUpdateData(id);
			var this_ = this;
			layer.open({
				type: 1,
				title: "修改工作流",
				area: ['1200px', '680px'],
				maxmin: true,
				content: $('.add-workflow').html(),
				success:function (layero, index){
					/*$("#btnSave").show();*/

					var proper={
						//toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],
						toolBtns:["task","node"],
						haveHead:true,
						headLabel:true,
						headBtns:["undo","redo","reload","print"],//如果haveHead=true，则定义HEAD区的按钮
						haveTool:true,
						haveDashed:true,
						haveGroup:true,
						useOperStack:true
					};

					var ht = $('<div id="demo" style="width:1118px;height:490px;"></div>');
					var sa = $('<input type="hidden" id="id" name="id">');
					$(layero[0]).find("div[data-mod='work']").append(ht);
					var domName = $(layero[0]).find("div[data-mod='work']").find("#demo");
					$(layero[0]).find("div[data-mod='save']").append(sa);
					var wk = $("#wk_"+id).val();
					var wkobj = eval('(' + wk + ')');
					demoObj =  this_.init(domName,proper);
					demo.loadData(wkobj);
					/*显示该条名称*/
					$(layero[0]).find("div[data-mod='work_flw_inp']").show();
					$(layero[0]).find("input[data-mod='workflowName']").val(tname);

				}
			});

		},

		//显示页面

		showLook:function(id,tname)
		{
			$("#btnSave").hide();
			var this_ = this;
			layer.open({
				type: 1,
				title: "查看工作流",
				area: ['1200px', '680px'],
				maxmin:true,
				content: $('.add-workflow').html(),
				success:function (layero, index){
					$("#btnSave").hide();
					var proper={
						//toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],
						toolBtns:["task","node"],
						haveHead:true,
						headLabel:true,
						headBtns:["undo","redo","reload","print"],//如果haveHead=true，则定义HEAD区的按钮
						haveTool:false,
						haveDashed:true,
						haveGroup:true,
						useOperStack:true
					};

					var ht = $('<div id="demo" style="width:1118px;height:490px;"></div>');
					var sa = $('<input type="hidden" id="id" name="id">');
					$(layero[0]).find("div[data-mod='work']").append(ht);
					var domName = $(layero[0]).find("div[data-mod='work']").find("#demo");
					$(layero[0]).find("div[data-mod='save']").append(sa);
					var wk = $("#wk_"+id).val();
					var wkobj = eval('(' + wk + ')');
					demoObj =  this_.init(domName,proper);
					demo.loadData(wkobj);

					/*弹出层显示该条名称*/
					$(layero[0]).find("div[data-mod='work_flw_inp']").show()
					//$(layero[0]).find("input[data-mod='workflowName']")[0].style.disabled="disabled";
					$(layero[0]).find("input[data-mod='workflowName']").css({"border":"0px","width":"500px"});
					$(layero[0]).find("input[data-mod='workflowName']").val(tname);
				}
			});

		},

		//删除工作流
		del:function(id){
			$("#id").val(id);
			/*if(confirm("是否删除选择的工作流"))
			{
				$.ajax({
					url:"/flxoa/workflow/delete",
					type : "post",
					data : {
						"id":id
					},
					success:function(data)
					{
						if(data)
						{
							alert("删除成功");
							getList();
						}
						else
						{
							alert("删除失败");
						}
					}
				});
			}*/


			layer.confirm("确认要删除吗，删除后不能恢复", {title: "删除确认"}, function (index) {
				//layer.close(index);
				$.post("/flxoa/workflow/delete", {"id":id}, function (data) {
					console.log(data)
					if(data==1){
						//data="删除成功"
						layer.msg("删除成功");
						getList()
						layer.close(index);
					}else if(data==2){
						//data="删除失败"
						layer.msg("删除失败");
					}
							// layer.alert(data, {
							// 			title: "删除操作",
							// 			btn: ['确定']
							// 		},
							// 		function (index, item) {
							// 			//layer.close(index);
							// 			getList();
							// 			location.reload();
							// 		});



				});
			});















		},

		//保存工作流列表
		save:function(d){
		console.dir(demo);

		var id = $("#id").val();

		console.log(id);

		var workflowName = $(".layui-layer-content #workflowName").val();
		var workflowJson = JSON.stringify(demo.exportData());
		var templageIds = "";
		var templageNames = "";
		console.info(workflowJson);
		if("" == id)
		{
			$.ajax({
				url:"/flxoa/workflow/add",
				type : "post",
				data : {
					"workflowName":workflowName,
					"workflowJson":workflowJson,
					"templageIds":templageIds,
					"templageNames":templageNames
				},
				success:function(data)
				{
					if(data)
					{
						alert("添加成功");
						layer.closeAll();
						getList();
					}
					else
					{
						alert("添加失败");
					}
				}
			});
		}
		else
		{
			$.ajax({
				url:"/flxoa/workflow/update",
				type : "post",
				data : {
					"id":id,
					"workflowName":workflowName,
					"workflowJson":workflowJson
				},
				success:function(data)
				{
					if(data)
					{
						alert("修改成功");
						layer.closeAll();
						getList();
					}
					else
					{
						alert("修改失败");
					}
				}
			});
		}

	}

//		return demo;

	};







	$(function(){
		/*弹出添加工作流*/
		$('.btu-add-workflow').on('click',function(){
			$("#btnSave").show();
			$('#work_flw_inp').show();
			$("#id").val("");
			$("#workflowName").val("");
			if(null != demo){
				demo.clearData();
			}		
			var workLayer = layer.open({
				type: 1,
				title: "添加工作流",
				maxmin:true,
				area: ['1200px', '680px'],
				content: $('.add-workflow').html(),
				success:function(layero, index){
					var property={
						//toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],
						toolBtns:["task","node"],
						haveHead:true,
						headLabel:true,
						headBtns:["undo","redo","reload","print"],//如果haveHead=true，则定义HEAD区的按钮
						haveTool:true,
						haveDashed:true,
						haveGroup:true,
						useOperStack:true
					};

					var ht = $('<div id="demo" style="width:1118px;height:490px;"></div>');
					var sa = $('<input type="hidden" id="id" name="id">');
					$(layero[0]).find("div[data-mod='work']").append(ht);
					var domName = $(layero[0]).find("div[data-mod='work']").find("#demo");
					$(layero[0]).find("div[data-mod='save']").append(sa);
					demoObj =  gFlow.init(domName,property);
				}
			});

		});



			//划入显示操作名称
		  // $(document).on('mouseover','.roweye',function(){
    //         var thisId=$(this).attr("id");
    //         var thisIf=$(this).attr("data-original-title");
    //         layer.tips(thisIf,"#"+thisId,{
    //             tips: [1, '#222'],
    //         });
    //     });

  	 //     $(document).on('mouseover','.rowamend',function(){
    //         var thisId=$(this).attr("id");
    //         var thisIf=$(this).attr("data-original-title");
    //         layer.tips(thisIf,"#"+thisId,{
    //             tips: [1, '#222'],
    //         });
    //     });

  	 //     $(document).on('mouseover','.rowdelt',function(){
    //         var thisId=$(this).attr("id");
    //         var thisIf=$(this).attr("data-original-title");
    //         layer.tips(thisIf,"#"+thisId,{
    //             tips: [1, '#222'],
    //         });
    //     });


	});
</script>







<script>
	/*删掉上面的搜索框*/
	 $(function(){

getList();

		// $('#footer-search_length').remove("div");
		// $('#footer-search_filter').remove("div");
		 $('#workFlowTable_length').remove();
		 $('#workFlowTable_filter').remove();
	 })

</script>
<script src="/view/flxoa/page/nk/files/assets/js/app.js"></script>
</body>
</html>